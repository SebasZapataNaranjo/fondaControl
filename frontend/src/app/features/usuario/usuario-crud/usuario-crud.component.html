<div class="usuario-crud-container">
  <h2>Gestión de usuarios</h2>
  
  <form (ngSubmit)="guardarUsuario()" #usuarioForm="ngForm">
    <input [(ngModel)]="form.nombre" name="nombre" placeholder="Nombre" required />
    <select [(ngModel)]="form.codigoRol" name="codigoRol" required>
      <option value="" disabled selected>Selecciona un rol</option>
      <option *ngFor="let rol of roles" [value]="rol.id">{{ rol.nombre }}</option>
    </select>
    <input [(ngModel)]="form.contrasena" name="contrasena" placeholder="Contraseña" type="password" required />
    <button type="submit" class="btn-primary">{{ editando ? 'Actualizar' : 'Crear' }}</button>
    <button type="button" class="btn-secondary" (click)="cancelar()" *ngIf="editando">Cancelar</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Rol</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let usuario of usuarios">
        <td>{{ usuario.nombre }}</td>
        <td>{{ usuario.codigoRol }}</td>
        <td>
          <button (click)="editarUsuario(usuario)">Editar</button>
          <button (click)="eliminarUsuario(usuario.id!)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>
<div class="usuario-page">
  <div class="usuario-card">

    <!-- 1) Menú Lateral -->
    <aside class="usuario-nav">
      <h2>Fonda Control</h2>
      <nav>
        <a routerLink="/sesiones">Sesiones</a>
        <a routerLink="/informe-caja">Informe de Caja</a>
        <a routerLink="/mesas">Mesas</a>
        <a routerLink="/ventas">Venta Rápida</a>
        <a routerLink="/usuarios">Usuarios</a>
        <a routerLink="/inventario">Inventario</a>
      </nav>
    </aside>

    <!-- 2) Contenido Principal -->
    <main class="usuario-main">
      <header class="usuario-main__header">
        <h1>Usuarios</h1>
        <button mat-flat-button class="btn-accent" (click)="startAdd()">
          Agregar Usuario
        </button>
      </header>

      <section class="usuario-table-wrapper">
        <table class="user-table">
          <thead>
          <tr>
            <th>Nombre</th>
            <th>Rol</th>
            <th>Acciones</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let u of users">
            <td>{{ u.name }}</td>
            <td>{{ u.role }}</td>
            <td class="acciones">
              <button mat-stroked-button color="primary" (click)="startEdit(u)">
                modificar
              </button>
              <button mat-stroked-button color="warn" (click)="delete(u)">
                Eliminar
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </section>

      <form class="usuario-form" (ngSubmit)="save()" #userForm="ngForm">
        <h2 *ngIf="editing; else nuevo">Editar Usuario</h2>
        <ng-template #nuevo><h2>Nuevo Usuario</h2></ng-template>

        <mat-form-field appearance="fill">
          <mat-label>Nombre</mat-label>
          <input
            matInput
            name="name"
            required
            [(ngModel)]="form.name"
            placeholder="Ingresa el nombre"
          />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Rol</mat-label>
          <input
            matInput
            name="role"
            required
            [(ngModel)]="form.role"
            placeholder="Ingresa el rol"
          />
        </mat-form-field>
<div class="usuario-page">
  <div class="usuario-card">

    <!-- 1) Menú Lateral -->
    <aside class="usuario-nav">
      <h2>Fonda Control</h2>
      <nav>
        <a routerLink="/sesiones">Sesiones</a>
        <a routerLink="/informe-caja">Informe de Caja</a>
        <a routerLink="/mesas">Mesas</a>
        <a routerLink="/ventas">Venta Rápida</a>
        <a routerLink="/usuarios">Usuarios</a>
        <a routerLink="/inventario">Inventario</a>
      </nav>
    </aside>

    <!-- 2) Contenido Principal -->
    <main class="usuario-main">
      <header class="usuario-main__header">
        <h1>Usuarios</h1>
        <button mat-flat-button class="btn-accent" (click)="startAdd()">
          Agregar Usuario
        </button>
      </header>

      <section class="usuario-table-wrapper">
        <table class="user-table">
          <thead>
          <tr>
            <th>Nombre</th>
            <th>Rol</th>
            <th>Acciones</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let u of users">
            <td>{{ u.name }}</td>
            <td>{{ u.role }}</td>
            <td class="acciones">
              <button mat-stroked-button color="primary" (click)="startEdit(u)">
                modificar
              </button>
              <button mat-stroked-button color="warn" (click)="delete(u)">
                Eliminar
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </section>

      <form class="usuario-form" (ngSubmit)="save()" #userForm="ngForm">
        <h2 *ngIf="editing; else nuevo">Editar Usuario</h2>
        <ng-template #nuevo><h2>Nuevo Usuario</h2></ng-template>

        <mat-form-field appearance="fill">
          <mat-label>Nombre</mat-label>
          <input
            matInput
            name="name"
            required
            [(ngModel)]="form.name"
            placeholder="Ingresa el nombre"
          />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Rol</mat-label>
          <input
            matInput
            name="role"
            required
            [(ngModel)]="form.role"
            placeholder="Ingresa el rol"
          />
        </mat-form-field>
<div class="usuario-page">
  <div class="usuario-card">

    <!-- 1) Menú Lateral -->
    <aside class="usuario-nav">
      <h2>Fonda Control</h2>
      <nav>
        <a routerLink="/sesiones">Sesiones</a>
        <a routerLink="/informe-caja">Informe de Caja</a>
        <a routerLink="/mesas">Mesas</a>
        <a routerLink="/ventas">Venta Rápida</a>
        <a routerLink="/usuarios">Usuarios</a>
        <a routerLink="/inventario">Inventario</a>
      </nav>
    </aside>

    <!-- 2) Contenido Principal -->
    <main class="usuario-main">
      <header class="usuario-main__header">
        <h1>Usuarios</h1>
        <button mat-flat-button class="btn-accent" (click)="startAdd()">
          Agregar Usuario
        </button>
      </header>

      <section class="usuario-table-wrapper">
        <table class="user-table">
          <thead>
          <tr>
            <th>Nombre</th>
            <th>Rol</th>
            <th>Acciones</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let u of users">
            <td>{{ u.name }}</td>
            <td>{{ u.role }}</td>
            <td class="acciones">
              <button mat-stroked-button color="primary" (click)="startEdit(u)">
                modificar
              </button>
              <button mat-stroked-button color="warn" (click)="delete(u)">
                Eliminar
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </section>

      <form class="usuario-form" (ngSubmit)="save()" #userForm="ngForm">
        <h2 *ngIf="editing; else nuevo">Editar Usuario</h2>
        <ng-template #nuevo><h2>Nuevo Usuario</h2></ng-template>

        <mat-form-field appearance="fill">
          <mat-label>Nombre</mat-label>
          <input
            matInput
            name="name"
            required
            [(ngModel)]="form.name"
            placeholder="Ingresa el nombre"
          />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Rol</mat-label>
          <input
            matInput
            name="role"
            required
            [(ngModel)]="form.role"
            placeholder="Ingresa el rol"
          />
        </mat-form-field>
</div>
