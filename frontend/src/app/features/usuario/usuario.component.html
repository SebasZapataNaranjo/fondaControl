<!-- src/app/features/usuario/usuario.component.html -->

<h2>Gestión de Usuarios</h2>

<form (ngSubmit)="guardar()" *ngIf="!cargando">
  <div class="campo">
    <label>Nombre</label>
    <input
      type="text"
      [(ngModel)]="nuevo.nombre"
      name="nombre"
      placeholder="Nombre completo"
      required
    />
  </div>
  <div class="campo">
    <label>Correo</label>
    <input
      type="email"
      [(ngModel)]="nuevo.correo"
      name="correo"
      placeholder="usuario@ejemplo.com"
      required
    />
  </div>
  <div class="campo">
    <label>Código Rol</label>
    <input
      type="text"
      [(ngModel)]="nuevo.rolCodigo"
      name="rolCodigo"
      placeholder="UUID Rol"
      required
    />
  </div>
  <button type="submit">
    {{ nuevo.codigo ? 'Actualizar' : 'Crear' }}
  </button>
</form>

<div *ngIf="cargando" class="info">Cargando...</div>
<div *ngIf="error" class="error">{{ error }}</div>

<ul class="lista-usuarios">
  <li *ngFor="let u of lista">
    <span>{{ u.nombre }}</span>
    <span>{{ u.correo }}</span>
    <span>Rol: {{ u.rolCodigo }}</span>
    <button (click)="eliminar(u.codigo)">Eliminar</button>
    <button (click)="nuevo = { ...u }">Editar</button>
  </li>
</ul>
